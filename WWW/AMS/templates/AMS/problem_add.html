{% extends "AMS/header.html" %}

{% load static %}

{% block title %}문제 제출{% endblock %}

{% block content_header %}
	<!--CustomCSS-->
	{{ create_form.media.css }}
	<link rel="stylesheet" href="{% static "assets/css/problem_add.css" %}">
	<link rel="stylesheet" href="{% static "assets/css/language_selector.css" %}">
	<link rel="stylesheet/less" type="text/css" href="{% static "assets/less/upload_widget.less" %}">
	<!--CustomJS-->
	{{ create_form.media.js }}
	<script src="{% static "assets/js/classfinder.js" %}"></script>
	<script src="{% static "assets/js/upload.js" %}"></script>
	<script src="{% static "assets/js/upload-widget.js" %}"></script>
	<script type="text/javascript">
		/** prevent to open droped file **/
		window.ondragover = function (e) {
			e.preventDefault();
			return false
		};
		window.ondrop = function (e) {
			e.preventDefault();
			return false
		};

		document.addEventListener("DOMContentLoaded", function () {
			document.getElementById('minus').addEventListener('click', function (event) {
				document.getElementById("hintBar").value -= 5;
				if (document.getElementById("hintBar").value == 0) document.getElementById("percent").innerHTML = "항상 힌트를 보여줍니다";
				else document.getElementById("percent").innerHTML = document.getElementById("hintBar").value + "% 이상 맞으면 힌트보여주기";
			});
			document.getElementById('plus').addEventListener('click', function (event) {
				document.getElementById("hintBar").value += 5;
				if (document.getElementById("hintBar").value == 100) document.getElementById("percent").innerHTML = "힌트를 보여주지 않습니다";
				else document.getElementById("percent").innerHTML = document.getElementById("hintBar").value + "% 이상 맞으면 힌트보여주기";
			});
		});
	</script>
{% endblock %}

{% block problem_add %}active{% endblock %}

{% block content %}
	{# FIXME: style 태그 말고 bootstrap의 css로 화면 크기마다 유동적으로 좌 우의 마진 조절하기 #}
	<div class="content container-fluid" style="margin-left: 100px; margin-right: 100px;">
		<form enctype="multipart/form-data" method="post">
			{% csrf_token %}
			<h2>문제 이름</h2>
			<fieldset class="form-group p_name">
				{{ create_form.p_name }}
			</fieldset>

			<div class="date_picker">
				<h2>마감기한</h2>
				{{ create_form.p_day_limit }}
			</div>

			<div id="language-wrapper">
				<h2>허용되는 언어</h2>
				<label class="switch-slide">
					{{ create_form.p_c_ok }}
					<span class="switch-label" data-on="C on" data-off="C off"></span>
				</label>
				<label class="switch-slide">
					{{ create_form.p_cpp_ok }}
					<span class="switch-label" data-on="CPP on" data-off="CPP off"></span>
				</label>
				<label class="switch-slide">
					{{ create_form.p_java_ok }}
					<span class="switch-label" data-on="JAVA on" data-off="JAVA off"></span>
				</label>
				<label class="switch-slide">
					{{ create_form.p_py_ok }}
					<span class="switch-label" data-on="PYTHON on" data-off="PYTHON off"></span>
				</label>
				<label class="switch-slide">
					{{ create_form.p_make_ok }}
					<span class="switch-label" data-on="MAKEFILE on" data-off="MAKEFILE off"></span>
				</label>
			</div>

			<div id="hint-wrapper">
				<h2>힌트여부</h2>
				<div id="hintProgress">
					<progress id="hintBar" value="100" max="100"
							  style="width:70%">{{ create_form.p_hint_integer }}</progress>
				</div>
				<div class="btn-group">
					<button type="button" class="btn" id="minus">-</button>
					<button type="button" class="btn" id="plus">+</button>
				</div>
				<p id="percent">힌트를 보여주지 않습니다</p>
			</div>

			<h2>입/출력/코드 옵션</h2>
			<ul class="nav nav-tabs">
				<li class="active"><a data-toggle="tab" href="#input_code">입력+코드</a></li>
				<li><a data-toggle="tab" href="#only_code">코드</a></li>
				<li><a data-toggle="tab" href="#input_output">입력+출력</a></li>
			</ul>
			<div class="tab-content">
				<div id="input_code" class="tab-pane fade in active">
					{% include 'component/upload_tab_1.html' %}
				</div>
				<div id="only_code" class="tab-pane fade">
					{% include 'component/upload_tab_2.html' %}
				</div>
				<div id="input_output" class="tab-pane fade">
					{% include 'component/upload_tab_3.html' %}
				</div>
			</div>

			<h2>문제 내용</h2>
			<ul class="nav nav-tabs" role="tablist">
				<li class="active"><a data-toggle="tab" href="#editor">텍스트로 작성</a></li>
				<li><a data-toggle="tab" href="#pdf-upload">PDF 업로드</a></li>
			</ul>
			<div class="tab-content">
				<div id="editor" class="tab-pane fade in active">
					<div id="p_content">{{ create_form.p_content }}</div>
				</div>
				<div id="pdf-upload" class="tab-pane fade">
					<div class="pdfUpload btn btn-primary">
						<span>PDF FILE</span>
						{{ create_form.p_pdffile }}
					</div>
				</div>
			</div>

			<div>
				<input class="btn btn-primary" id="save_problem" type="submit" value="SAVE"/>
				<input class="btn btn-primary" id="temp_saveproblem" type="submit" value="TEMPORARY SAVE"/>
			</div>
		</form>
	</div>
{% endblock %}
